(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{803:function(t,o,e){"use strict";e.r(o);var v=e(15),_=Object(v.a)({},(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"生命周期详解"}},[t._v("生命周期详解")]),t._v(" "),e("blockquote",[e("p",[t._v("2020.2.15")])]),t._v(" "),e("p",[e("code",[t._v("React16.3")]),t._v("之后的生命周期主要包含三个阶段:")]),t._v(" "),e("ol",[e("li",[t._v("组件加载阶段")]),t._v(" "),e("li",[t._v("组件更新阶段")]),t._v(" "),e("li",[t._v("组件卸载阶段")])]),t._v(" "),e("h2",{attrs:{id:"加载阶段"}},[t._v("加载阶段")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("constructor()")])])]),t._v(" "),e("blockquote",[e("p",[t._v("加载的时候调用一次，可以初始化"),e("code",[t._v("state")]),t._v(",继承"),e("code",[t._v("props")]),t._v("等")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("code",[t._v("static getDerivedStateFromProps(props, state)")])])]),t._v(" "),e("blockquote",[e("p",[t._v("组件每次被"),e("code",[t._v("rerender")]),t._v("的时候，包括在组件构建之后(虚拟"),e("code",[t._v("dom")]),t._v("之后，实际"),e("code",[t._v("dom")]),t._v("挂载之前)，每次获取新的"),e("code",[t._v("props")]),t._v("或"),e("code",[t._v("state")]),t._v("之后；每次接收新的"),e("code",[t._v("props")]),t._v("之后都会返回一个对象作为新的"),e("code",[t._v("state")]),t._v("，返回"),e("code",[t._v("null")]),t._v("则说明不需要更新"),e("code",[t._v("state")]),t._v("；配合"),e("code",[t._v("componentDidUpdate")]),t._v("，可以覆盖"),e("code",[t._v("componentWillReceiveProps")]),t._v("的所有用法。")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[e("code",[t._v("render()")])])]),t._v(" "),e("blockquote",[e("p",[t._v("react最重要的步骤，创建虚拟"),e("code",[t._v("dom")]),t._v("，进行"),e("code",[t._v("diff")]),t._v("算法，更新dom树都在此进行。")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[e("code",[t._v("componentDidMount()")])])]),t._v(" "),e("blockquote",[e("p",[t._v("组件渲染之后调用，只调用一次。")])]),t._v(" "),e("h2",{attrs:{id:"更新阶段"}},[t._v("更新阶段")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("static getDerivedStateFromProps(props, state)")])])]),t._v(" "),e("blockquote",[e("p",[t._v("组件每次被"),e("code",[t._v("rerender")]),t._v("的时候，包括在组件构建之后(虚拟"),e("code",[t._v("dom")]),t._v("之后，实际"),e("code",[t._v("dom")]),t._v("挂载之前)，每次获取新的"),e("code",[t._v("props")]),t._v("或"),e("code",[t._v("state")]),t._v("之后；每次接收新的"),e("code",[t._v("props")]),t._v("之后都会返回一个对象作为新的"),e("code",[t._v("state")]),t._v("，返回"),e("code",[t._v("null")]),t._v("则说明不需要更新"),e("code",[t._v("state")]),t._v("；配合"),e("code",[t._v("componentDidUpdate")]),t._v("，可以覆盖"),e("code",[t._v("componentWillReceiveProps")]),t._v("的所有用法。")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("code",[t._v("shouldComponentUpdate(nextProps, nextState)")])])]),t._v(" "),e("blockquote",[e("p",[t._v("组件接收到新的props或者state时调用，return true就会更新dom（使用diff算法更新），return false能阻止更新（不调用render）。")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[e("code",[t._v("render()")])])]),t._v(" "),e("blockquote",[e("p",[t._v("react最重要的步骤，创建虚拟"),e("code",[t._v("dom")]),t._v("，进行"),e("code",[t._v("diff")]),t._v("算法，更新dom树都在此进行。")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[e("code",[t._v("getSnapshotBeforeUpdate(prevProps, prevState)")])])]),t._v(" "),e("blockquote",[e("p",[t._v("触发时间: "),e("code",[t._v("update")]),t._v("发生的时候，在"),e("code",[t._v("render")]),t._v("之后，在组件dom渲染之前；返回一个值，作为"),e("code",[t._v("componentDidUpdate")]),t._v("的第三个参数；配合"),e("code",[t._v("componentDidUpdate")]),t._v(", 可以覆盖"),e("code",[t._v("componentWillUpdate")]),t._v("的所有用法")])]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[e("code",[t._v("componentDidUpdate()")])])]),t._v(" "),e("blockquote",[e("p",[t._v("组件加载时不调用，组件更新完成后调用.")])]),t._v(" "),e("h2",{attrs:{id:"卸载阶段"}},[t._v("卸载阶段")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("componentWillUnMount()")])])]),t._v(" "),e("blockquote",[e("p",[t._v("z组件卸载之后调用，只触发一次")])]),t._v(" "),e("h2",{attrs:{id:"错误处理"}},[t._v("错误处理")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("static getDerivedStateFromError(error)")])])]),t._v(" "),e("blockquote",[e("p",[t._v("此生命周期会在后代组件抛出错误后被调用。 它将抛出的错误作为参数，并返回一个值以更新 state")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("code",[t._v("componentDidCatch(error，info)")])])]),t._v(" "),e("blockquote",[e("p",[t._v("任何一处的javascript报错会触发。")])]),t._v(" "),e("h2",{attrs:{id:"完整的生命周期图"}},[t._v("完整的生命周期图")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://img-blog.csdnimg.cn/20200216121931416.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3hqbDI3MTMxNA==,size_16,color_FFFFFF,t_70",alt:"React生命周期"}})])])}),[],!1,null,null,null);o.default=_.exports}}]);